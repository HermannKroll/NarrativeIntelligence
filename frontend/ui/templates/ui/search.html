{% extends 'base.html' %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/ui.css' %}">
{% endblock %}

{# TODO: Implement https://visjs.org/examples/network/basicUsage.html #}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col">
                <h1>{% block title %}PubMedCentral{% endblock %}</h1>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <form method="POST" action="{% url 'search' %}">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="id_keywords">Keywords</label>
                            <textarea class="form-control" id="id_keywords" rows="3"
                                      name="keywords">{{ keyword_str }}</textarea>
                            <small id="id_help" class="form-text text-muted" aria-describedby="id_help">
                                Please type in the keywords you want to query.
                            </small>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Search patterns</button>
                </form>
            </div>
        </div>

        {% if patterns and keyword_str %}
            <div class="row margin-top">
                <div class="col">
                    <h2>Graph patterns for {{ keyword_str }}</h2>
                    <form method="POST" action="{% url 'search' %}">
                        {% csrf_token %}
                        {% for pattern in patterns %}
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="patterns"
                                       value="{{ forloop.counter }}" id="p{{ forloop.counter }}">
                                <label class="form-check-label" for="p{{ forloop.counter }}">
                                    {% for s,p,o in pattern %}
                                        <p>{{ s }} - {{ p }} - {{ o }}</p>
                                    {% endfor %}
                                </label>
                            </div>
                        {% endfor %}
                        <input type="hidden" name="keywords" value="{{ keyword_str }}"/>
                        <button type="submit" class="btn btn-primary">Search documents</button>
                    </form>
                </div>
            </div>
            </div>
        {% endif %}

    {% if pattern_idx and keyword_str %}
        <div class="row margin-top">
            <div class="col">
                <h2>Documents for pattern {{ pattern_idx }}</h2>
            </div>
        </div>
    {% endif %}
{% endblock %}